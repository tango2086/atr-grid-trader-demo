# 🤖 BIAS-ATR-Grid-Trader 智能交易系统

> 让网格交易更智能、更简单

## 📋 项目简介

BIAS-ATR-Grid-Trader 是一个基于 **BIAS乖离率** 和 **ATR平均真实波幅** 的智能ETF网格交易系统。通过科学的市场分区和智能风控，为您提供个性化的交易决策建议。

### 🎯 核心特性

- **🤖 智能配置向导** - 根据您的情况推荐个性化参数
- **📊 实时市场分析** - 基于BIAS和ATR指标的精准分析
- **⚡ 一键生成计划** - 快速生成当日交易建议
- **🎨 可视化报告** - 直观的图表展示
- **🛡️ 智能风控** - 逃顶、熔断、背离等多重保护
- **🔄 交互式界面** - 友好的用户操作体验

## 🚀 快速开始

### 方法1: 一键启动（推荐）

双击运行 `start.bat` 或在命令行执行：

```bash
python run.py
```

### 方法2: 智能模式

```bash
# 运行智能配置向导
python smart_wizard.py

# 启动智能主程序
python smart_main.py
```

### 方法3: 标准模式

```bash
# 使用默认参数运行
python main.py
```

## 📊 策略原理

### 市场分区系统

基于BIAS_20指标将市场分为5个区间：

| 状态 | BIAS范围 | 策略 | 目标仓位 |
|------|----------|------|----------|
| 🟢 深坑区 | < -10% | 激进买入 | 80-95% |
| 🟡 黄金区 | -10% ~ -3% | 建议买入 | 60-80% |
| 🔵 震荡区 | -3% ~ 8% | 网格交易 | 40-60% |
| 🟠 减持区 | 8% ~ 20% | 建议卖出 | 20-40% |
| 🔴 逃亡区 | > 20% | 强制卖出 | 0% |

### 智能风控机制

1. **逃顶规则**
   - BIAS > 30: 强制卖出60%仓位
   - BIAS > 20: 强制卖出40%仓位

2. **阴跌熔断**
   - 单只ETF浮亏 > 10% 且 BIAS < 0: 暂停买入

3. **顶背离检测**
   - 价格创新高但BIAS未创新高: 触发逃顶

4. **模式切换**
   - BIAS从上方跌破3: 切换回震荡吸筹模式

## 📁 项目结构

```
BIAS-ATR-Grid-Trader/
├── config.py              # 基础配置文件
├── indicators.py           # 指标计算模块
├── strategy.py             # 核心策略逻辑
├── main.py                 # 标准主程序
├── smart_wizard.py         # 智能配置向导
├── smart_main.py           # 智能交互主程序
├── run.py                  # 一键启动脚本
├── visualizer.py           # 可视化报告生成器
├── start.bat              # Windows快速启动
└── README.md              # 本说明文档
```

## ⚙️ 配置说明

### 基础配置 (config.py)

```python
# ETF池配置
ETF_LIST = [
    "sh510300",  # 沪深300ETF
    "sh510500",  # 中证500ETF
    "sz159915",  # 创业板ETF
    "sh518880",  # 黄金ETF
    "sh512480",  # 半导体ETF
]

# 资金配置
TOTAL_CAPITAL = 200000.0  # 总资金
CAPITAL_PER_ETF = 40000   # 每只ETF分配资金

# BIAS阈值
class BIAS_THRESHOLDS:
    DEEP_DIP = -10.0
    GOLD_ZONE_UPPER = -3.0
    OSCILLATION_UPPER = 8.0
    REDUCE_ZONE_UPPER = 20.0
```

### 智能配置

运行智能配置向导，系统将根据：
- 投资经验
- 总资金规模
- 风险偏好
- 投资目标

自动推荐最适合的ETF配置和策略参数。

## 📈 使用指南

### 1. 首次使用

1. 运行 `python run.py`
2. 选择运行"智能配置向导"
3. 按提示回答问题
4. 系统生成个性化配置

### 2. 日常使用

1. 每日运行"一键生成今日交易计划"
2. 查看生成的markdown报告
3. 根据建议进行交易决策
4. 定期回顾历史报告

### 3. 高级功能

- **单独分析ETF**: 深度分析单个ETF
- **可视化报告**: 生成图表报告
- **参数调整**: 根据需要修改策略参数

## 🔧 安装依赖

```bash
# 基础依赖
pip install pandas numpy

# 可选依赖（实时数据）
pip install akshare

# 可选依赖（可视化）
pip install matplotlib
```

## 📊 报告说明

### 交易计划报告

每日生成的 `trade_plan_YYYYMMDD.md` 包含：

- 市场概况统计
- 每只ETF的详细分析
- 建议操作列表
- 风险提示
- 操作优先级

### 可视化报告

运行 `python visualizer.py` 生成：

- 市场热力图
- 策略分布饼图
- 个股价格走势图
- HTML综合报告

## ⚠️ 风险提示

1. **投资有风险，决策需谨慎**
2. 本系统仅供参考，不构成投资建议
3. 请根据自身风险承受能力合理配置资产
4. 建议先模拟运行，熟悉策略后再实盘操作

## 🤝 技术支持

### 常见问题

**Q: 数据获取失败怎么办？**
A: 系统会自动使用模拟数据，不影响策略测试。

**Q: 如何调整策略参数？**
A: 修改 `config.py` 或运行智能配置向导。

**Q: 网格间距如何计算？**
A: 系统基于ATR动态计算，确保覆盖交易成本。

**Q: 支持哪些ETF？**
A: 支持所有在akshare中可查询的ETF产品。

### Bug反馈

如遇到问题，请提供：
- 错误信息截图
- 操作步骤
- 系统环境信息

## 📝 更新日志

### v2.0.0 (2024-12-06)
- ✨ 新增智能配置向导
- 🎨 新增可视化报告系统
- 🔄 新增交互式操作界面
- 🚀 新增一键启动功能
- 🛡️ 增强风控机制
- 📊 优化报告格式

### v1.0.0 (2024-12-06)
- ✨ 完整的BIAS-ATR网格交易策略
- 🛡️ 多重风控机制
- 📊 基础报告生成

## 📄 许可证

本项目仅供学习和研究使用。

---

**祝您投资顺利！📈**
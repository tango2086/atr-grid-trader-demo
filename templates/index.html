<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIAS-ATR Grid Trader Pro</title>
    <!-- Use vanilla CSS from static -->
    <link rel="stylesheet" href="/static/css/style.css">
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- ECharts -->
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <link rel="shortcut icon" href="/static/favicon.ico">
</head>

<body>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-icon">‚ö°</div>
                <span>Grid Trader</span>
            </div>

            <nav class="nav-menu">
                <a href="#" class="nav-item active" id="nav-dashboard" onclick="App.navigate('dashboard')">
                    <span class="nav-icon">üìä</span> ‰ª™Ë°®Áõò
                </a>
                <a href="#" class="nav-item" id="nav-history" onclick="App.navigate('history')">
                    <span class="nav-icon">üìù</span> ‰∫§ÊòìËÆ∞ÂΩï
                </a>
                <a href="#" class="nav-item" id="nav-signals" onclick="App.navigate('signals')">
                    <span class="nav-icon">üîî</span> ‰∫§Êòì‰ø°Âè∑
                </a>
                <a href="#" class="nav-item" id="nav-logs" onclick="App.navigate('logs')">
                    <span class="nav-icon">üìú</span> Á≥ªÁªüÊó•Âøó
                </a>
            </nav>

            <div class="system-status">
                <div class="status-item">
                    <span>Trader Áä∂ÊÄÅ</span>
                    <div id="traderStatusDot" class="status-dot"></div>
                </div>
                <div class="status-item">
                    <span id="traderStatusText" style="font-size:0.75rem; opacity:0.7">Ê£ÄÊü•‰∏≠...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <h1 class="page-title" id="pageTitle">Dashboard</h1>
                <div class="top-actions">
                    <button class="btn btn-secondary btn-sm" id="refreshBtn">
                        Refresh Data
                    </button>
                    <!-- Future: Theme Toggle, User Profile -->
                </div>
            </header>

            <!-- Scroll Area -->
            <div class="content-scroll">

                <!-- VIEW: Dashboard -->
                <div id="view-dashboard" class="view-section">
                    <div class="grid-container">

                        <!-- Metrics Row -->
                        <div class="metrics-row">
                            <div class="card">
                                <div class="metric-header">
                                    <span class="metric-title">ÊÄªËµÑ‰∫ß (CNY)</span>
                                    <span class="metric-icon">üí∞</span>
                                </div>
                                <div class="metric-value" id="totalAssets">--</div>
                                <div class="metric-sub">
                                    ‰ªì‰ΩçÂç†ÊØî: <span id="positionPct">--</span>
                                </div>
                            </div>

                            <div class="card">
                                <div class="metric-header">
                                    <span class="metric-title">‰ªäÊó•Êî∂Áõä</span>
                                    <span class="metric-icon">üìÖ</span>
                                </div>
                                <div class="metric-value" id="dayProfit">--</div>
                                <div class="metric-sub">
                                    Â∑≤ÂÆûÁé∞ (Êú¨Êó•)
                                </div>
                            </div>

                            <div class="card">
                                <div class="metric-header">
                                    <span class="metric-title">ÂΩìÂâçÊµÆÁõà</span>
                                    <span class="metric-icon">üåä</span>
                                </div>
                                <div class="metric-value" id="floatPnl">--</div>
                                <div class="metric-sub">
                                    ÊâÄÊúâÊåÅ‰ªìÊú™Âπ≥‰ªìÁõà‰∫è
                                </div>
                            </div>

                            <div class="card">
                                <div class="metric-header">
                                    <span class="metric-title">Á¥ØËÆ°Â∑≤ÂÆûÁé∞</span>
                                    <span class="metric-icon">üèÜ</span>
                                </div>
                                <div class="metric-value" id="realizedPnl">--</div>
                                <div class="metric-sub">
                                    ÂéÜÂè≤Á¥ØËÆ°ËêΩË¢ãÊî∂Áõä
                                </div>
                            </div>
                        </div>

                        <!-- Chart & Trade Row -->
                        <div class="charts-row">
                            <!-- Main Chart -->
                            <div class="card chart-card">
                                <div class="chart-header">
                                    <div class="chart-title-group">
                                        <h3 id="chartTitle" style="font-weight:500">ÈÄâÊã© ETF Êü•Áúã K Á∫ø</h3>
                                    </div>
                                </div>
                                <div class="chart-body" id="mainChart">
                                    <!-- ECharts renders here -->
                                </div>
                            </div>

                            <!-- Quick Trade Panel -->
                            <div class="card chart-card" style="overflow:visible">
                                <div class="chart-header">
                                    <h3>Âø´ÈÄü‰∏ãÂçï</h3>
                                </div>
                                <div class="trade-panel">
                                    <form id="tradeForm" class="trade-form">
                                        <div class="form-group">
                                            <label class="form-label">‰ª£Á†Å</label>
                                            <input type="text" id="tradeCode" class="form-input" placeholder="sh510050">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">‰ª∑Ê†º</label>
                                            <input type="number" id="tradePrice" class="form-input" step="0.001"
                                                placeholder="0.000">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Êï∞Èáè</label>
                                            <input type="number" id="tradeVolume" class="form-input" step="100"
                                                placeholder="100">
                                        </div>

                                        <div class="trade-btn-group">
                                            <button type="submit" class="btn btn-buy" data-direction="BUY">‰π∞ÂÖ•</button>
                                            <button type="submit" class="btn btn-sell" data-direction="SELL">ÂçñÂá∫</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- ETF Grid -->
                        <div class="section-title">
                            <span>üì°</span> ÁõëÊéßÂàóË°® (ETF List)
                        </div>
                        <div class="etf-grid" id="etfGrid">
                            <!-- Dynamic ETF Cards -->
                        </div>

                        <!-- Recent Signals Section -->
                        <div class="section-title" style="margin-top: 3rem;">
                            <span>üîî</span> ÊúÄÊñ∞‰ø°Âè∑ (Last 5 Signals)
                        </div>
                        <div id="dashboardSignals" class="grid-container"
                            style="gap: 1rem; width:100%; margin:0; padding:0; display:grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));">
                            <!-- Dynamic Content -->
                        </div>

                    </div> <!-- End grid-container -->

                </div> <!-- End view-dashboard -->

                <!-- VIEW: Trade History -->
                <div id="view-history" class="view-section hidden">
                    <div class="card" style="padding:0">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Êó∂Èó¥</th>
                                    <th>‰ª£Á†Å</th>
                                    <th>ÊñπÂêë</th>
                                    <th>‰ª∑Ê†º</th>
                                    <th>Êï∞Èáè</th>
                                    <th>Â∑≤ÂÆûÁé∞Áõà‰∫è</th>
                                </tr>
                            </thead>
                            <tbody id="tradeHistoryBody">
                                <!-- Dynamic Content -->
                            </tbody>
                        </table>
                    </div>
                </div> <!-- End view-history -->

                <!-- VIEW: Signals -->
                <div id="view-signals" class="view-section hidden">
                    <div class="grid-container" id="signalsGrid">
                        <!-- Dynamic Signals Content -->
                    </div>
                </div>

                <!-- VIEW: Logs -->
                <div id="view-logs" class="view-section hidden">
                    <div class="card" style="padding:0; background: #1e1e1e; border:1px solid #333;">
                        <div class="log-console" id="logConsole">
                            <!-- Dynamic Logs -->
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="/static/js/app.js"></script>
</body>

</html>